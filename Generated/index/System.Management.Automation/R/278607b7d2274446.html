<!DOCTYPE html>
<html><head><title>RemoteSessionState</title><link rel="stylesheet" href="../../styles.css"/><script src="../../scripts.js"></script></head><body onload="ro();">
<div class="rH">226 references to RemoteSessionState</div><div class="rA">System.Management.Automation (226)</div><div class="rG" id="System.Management.Automation"><div class="rF"><div class="rN">engine\remoting\client\clientremotesession.cs (6)</div>
<a href="../engine/remoting/client/clientremotesession.cs.html#303"><b>303</b>if (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.EstablishedAndKeyReceived) // TODO - Client session would never get into this state... to be removed</a>
<a href="../engine/remoting/client/clientremotesession.cs.html#309"><b>309</b>if (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.ClosingConnection)</a>
<a href="../engine/remoting/client/clientremotesession.cs.html#333"><b>333</b>if (SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.Established ||</a>
<a href="../engine/remoting/client/clientremotesession.cs.html#334"><b>334</b>SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.EstablishedAndKeyRequested)</a>
<a href="../engine/remoting/client/clientremotesession.cs.html#392"><b>392</b>if (SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.EstablishedAndKeySent)</a>
<a href="../engine/remoting/client/clientremotesession.cs.html#423"><b>423</b>if (SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.Established)</a>
</div>
<div class="rF"><div class="rN">engine\remoting\client\clientremotesessionprotocolstatemachine.cs (105)</div>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#47"><b>47</b>private <i>RemoteSessionState</i> _state;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#181"><b>181</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.NegotiationReceived,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#183"><b>183</b>SetState(<i>RemoteSessionState</i>.Established, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#197"><b>197</b>SetState(<i>RemoteSessionState</i>.NegotiationReceived, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#204"><b>204</b>Dbg.Assert((_state == <i>RemoteSessionState</i>.NegotiationSending) || (_state == <i>RemoteSessionState</i>.NegotiationSendingOnConnect),</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#207"><b>207</b>SetState(<i>RemoteSessionState</i>.NegotiationSent, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#214"><b>214</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Connecting,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#217"><b>217</b>SetState(<i>RemoteSessionState</i>.ClosingConnection, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#224"><b>224</b>SetState(<i>RemoteSessionState</i>.Closed, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#231"><b>231</b>SetState(<i>RemoteSessionState</i>.Closed, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#238"><b>238</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Established,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#241"><b>241</b>if (_state == <i>RemoteSessionState</i>.Established)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#243"><b>243</b>SetState(<i>RemoteSessionState</i>.EstablishedAndKeyRequested, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#251"><b>251</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.EstablishedAndKeySent,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#254"><b>254</b>if (_state == <i>RemoteSessionState</i>.EstablishedAndKeySent)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#263"><b>263</b>SetState(<i>RemoteSessionState</i>.Established, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#278"><b>278</b>Dbg.Assert(_state &gt;= <i>RemoteSessionState</i>.Established,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#283"><b>283</b>if (_state == <i>RemoteSessionState</i>.Established ||</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#284"><b>284</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeyRequested)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#286"><b>286</b>SetState(<i>RemoteSessionState</i>.EstablishedAndKeySent, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#296"><b>296</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Disconnecting || _state == <i>RemoteSessionState</i>.RCDisconnecting,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#299"><b>299</b>if (_state == <i>RemoteSessionState</i>.Disconnecting || _state == <i>RemoteSessionState</i>.RCDisconnecting)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#301"><b>301</b>SetState(<i>RemoteSessionState</i>.Disconnected, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#308"><b>308</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Disconnecting,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#311"><b>311</b>if (_state == <i>RemoteSessionState</i>.Disconnecting)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#313"><b>313</b>SetState(<i>RemoteSessionState</i>.Disconnected, eventArgs.Reason); // set state to disconnected even TODO. Put some ETW event describing the disconnect process failure</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#320"><b>320</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Reconnecting,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#323"><b>323</b>if (_state == <i>RemoteSessionState</i>.Reconnecting)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#325"><b>325</b>SetState(<i>RemoteSessionState</i>.Established, eventArgs.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#339"><b>339</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.EstablishedAndKeySent, &quot;timeout should only happen when waiting for a key&quot;);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#363"><b>363</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.NegotiationReceived &amp;&amp;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#379"><b>379</b>State == <i>RemoteSessionState</i>.Established)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#398"><b>398</b>_stateMachineHandle = new EventHandler&lt;RemoteSessionStateMachineEventArgs&gt;[(int)<i>RemoteSessionState</i>.MaxState, (int)RemoteSessionEvent.MaxEvent];</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#416"><b>416</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Idle, (int)RemoteSessionEvent.NegotiationSending] += DoNegotiationSending;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#418"><b>418</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Idle, (int)RemoteSessionEvent.NegotiationSendingOnConnect] += DoNegotiationSending;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#420"><b>420</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationSending, (int)RemoteSessionEvent.NegotiationSendCompleted] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#422"><b>422</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationSendingOnConnect, (int)RemoteSessionEvent.NegotiationSendCompleted] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#424"><b>424</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationSent, (int)RemoteSessionEvent.NegotiationReceived] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#426"><b>426</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationReceived, (int)RemoteSessionEvent.NegotiationCompleted] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#428"><b>428</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationReceived, (int)RemoteSessionEvent.NegotiationFailed] += SetStateToClosedHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#430"><b>430</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Connecting, (int)RemoteSessionEvent.ConnectFailed] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#432"><b>432</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.ClosingConnection, (int)RemoteSessionEvent.CloseCompleted] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#434"><b>434</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.DisconnectStart] += DoDisconnect;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#435"><b>435</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Disconnecting, (int)RemoteSessionEvent.DisconnectCompleted] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#436"><b>436</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Disconnecting, (int)RemoteSessionEvent.DisconnectFailed] += SetStateHandler; // dont close</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#437"><b>437</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Disconnected, (int)RemoteSessionEvent.ReconnectStart] += DoReconnect;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#438"><b>438</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Reconnecting, (int)RemoteSessionEvent.ReconnectCompleted] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#439"><b>439</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Reconnecting, (int)RemoteSessionEvent.ReconnectFailed] += SetStateToClosedHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#441"><b>441</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Disconnecting, (int)RemoteSessionEvent.RCDisconnectStarted] += DoRCDisconnectStarted;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#442"><b>442</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Disconnected, (int)RemoteSessionEvent.RCDisconnectStarted] += DoRCDisconnectStarted;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#443"><b>443</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.RCDisconnectStarted] += DoRCDisconnectStarted;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#444"><b>444</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.RCDisconnecting, (int)RemoteSessionEvent.DisconnectCompleted] += SetStateHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#447"><b>447</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeySent, (int)RemoteSessionEvent.DisconnectStart] += DoDisconnectDuringKeyExchange;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#448"><b>448</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyRequested, (int)RemoteSessionEvent.DisconnectStart] += DoDisconnectDuringKeyExchange;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#450"><b>450</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.KeyRequested] += SetStateHandler; //</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#451"><b>451</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.KeySent] += SetStateHandler; //</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#452"><b>452</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.KeySendFailed] += SetStateToClosedHandler; //</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#453"><b>453</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeySent, (int)RemoteSessionEvent.KeyReceived] += SetStateHandler; //</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#454"><b>454</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyRequested, (int)RemoteSessionEvent.KeySent] += SetStateHandler; //</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#455"><b>455</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeySent, (int)RemoteSessionEvent.KeyReceiveFailed] += SetStateToClosedHandler; //</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#456"><b>456</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyRequested, (int)RemoteSessionEvent.KeySendFailed] += SetStateToClosedHandler;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#474"><b>474</b>SetState(<i>RemoteSessionState</i>.Idle, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#490"><b>490</b>if (_state == <i>RemoteSessionState</i>.Established ||</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#491"><b>491</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeyReceived ||   // TODO - Client session would never get into this state... to be removed</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#492"><b>492</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeySent ||</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#493"><b>493</b>_state == <i>RemoteSessionState</i>.Disconnecting ||               // There can be input data until disconnect has been completed</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#494"><b>494</b>_state == <i>RemoteSessionState</i>.Disconnected)                  // Data can arrive while state machine is transitioning to disconnected</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#576"><b>576</b>internal <i>RemoteSessionState</i> State</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#607"><b>607</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Idle,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#609"><b>609</b>Dbg.Assert(_state != <i>RemoteSessionState</i>.ClosingConnection ||</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#610"><b>610</b>_state != <i>RemoteSessionState</i>.Closed,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#613"><b>613</b>if (State == <i>RemoteSessionState</i>.Idle)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#640"><b>640</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Idle,</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#643"><b>643</b>if (State == <i>RemoteSessionState</i>.Idle)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#669"><b>669</b>SetState(<i>RemoteSessionState</i>.NegotiationSending, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#673"><b>673</b>SetState(<i>RemoteSessionState</i>.NegotiationSendingOnConnect, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#689"><b>689</b>SetState(<i>RemoteSessionState</i>.Disconnecting, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#694"><b>694</b>SetState(<i>RemoteSessionState</i>.Reconnecting, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#699"><b>699</b>if (State != <i>RemoteSessionState</i>.Disconnecting &amp;&amp;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#700"><b>700</b>State != <i>RemoteSessionState</i>.Disconnected)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#702"><b>702</b>SetState(<i>RemoteSessionState</i>.RCDisconnecting, null);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#723"><b>723</b><i>RemoteSessionState</i> oldState = _state;</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#727"><b>727</b>case <i>RemoteSessionState</i>.ClosingConnection:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#728"><b>728</b>case <i>RemoteSessionState</i>.Closed:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#732"><b>732</b>case <i>RemoteSessionState</i>.Connecting:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#733"><b>733</b>case <i>RemoteSessionState</i>.Connected:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#734"><b>734</b>case <i>RemoteSessionState</i>.Established:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#735"><b>735</b>case <i>RemoteSessionState</i>.EstablishedAndKeyReceived:  // TODO - Client session would never get into this state... to be removed</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#736"><b>736</b>case <i>RemoteSessionState</i>.EstablishedAndKeySent:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#737"><b>737</b>case <i>RemoteSessionState</i>.NegotiationReceived:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#738"><b>738</b>case <i>RemoteSessionState</i>.NegotiationSent:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#739"><b>739</b>case <i>RemoteSessionState</i>.NegotiationSending:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#740"><b>740</b>case <i>RemoteSessionState</i>.Disconnected:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#741"><b>741</b>case <i>RemoteSessionState</i>.Disconnecting:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#742"><b>742</b>case <i>RemoteSessionState</i>.Reconnecting:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#743"><b>743</b>case <i>RemoteSessionState</i>.RCDisconnecting:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#744"><b>744</b>SetState(<i>RemoteSessionState</i>.ClosingConnection, arg.Reason);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#747"><b>747</b>case <i>RemoteSessionState</i>.Idle:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#748"><b>748</b>case <i>RemoteSessionState</i>.UndefinedState:</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#751"><b>751</b>SetState(<i>RemoteSessionState</i>.Closed, forceClosedException);</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#791"><b>791</b>private void SetState(<i>RemoteSessionState</i> newState, Exception reason)</a>
<a href="../engine/remoting/client/clientremotesessionprotocolstatemachine.cs.html#793"><b>793</b><i>RemoteSessionState</i> oldState = _state;</a>
</div>
<div class="rF"><div class="rN">engine\remoting\client\remotingprotocol.cs (1)</div>
<a href="../engine/remoting/client/remotingprotocol.cs.html#23"><b>23</b>internal abstract void SendNegotiationAsync(<i>RemoteSessionState</i> sessionState);</a>
</div>
<div class="rF"><div class="rN">engine\remoting\client\RemotingProtocol2.cs (10)</div>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#64"><b>64</b>Dbg.Assert(RemoteSession.SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.Idle,</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#481"><b>481</b>if (e.SessionStateInfo.State == <i>RemoteSessionState</i>.NegotiationSending)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#511"><b>511</b>if (e.SessionStateInfo.State == <i>RemoteSessionState</i>.NegotiationSendingOnConnect)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#517"><b>517</b>else if (e.SessionStateInfo.State == <i>RemoteSessionState</i>.ClosingConnection)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#541"><b>541</b>else if (e.SessionStateInfo.State == <i>RemoteSessionState</i>.Closed)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#566"><b>566</b>else if (e.SessionStateInfo.State == <i>RemoteSessionState</i>.Connected)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#572"><b>572</b>else if (e.SessionStateInfo.State == <i>RemoteSessionState</i>.Disconnected)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#579"><b>579</b>else if (_reconnecting &amp;&amp; e.SessionStateInfo.State == <i>RemoteSessionState</i>.Established)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#584"><b>584</b>else if (e.SessionStateInfo.State == <i>RemoteSessionState</i>.RCDisconnecting)</a>
<a href="../engine/remoting/client/RemotingProtocol2.cs.html#1384"><b>1384</b>new RemoteSessionStateEventArgs(new RemoteSessionStateInfo(<i>RemoteSessionState</i>.Closed, _sessionClosedReason)) :</a>
</div>
<div class="rF"><div class="rN">engine\remoting\client\remotingprotocolimplementation.cs (11)</div>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#241"><b>241</b>internal override void SendNegotiationAsync(<i>RemoteSessionState</i> sessionState)</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#252"><b>252</b>if (sessionState == <i>RemoteSessionState</i>.NegotiationSending)</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#256"><b>256</b>else if (sessionState == <i>RemoteSessionState</i>.NegotiationSendingOnConnect)</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#286"><b>286</b>if ((arg.SessionStateInfo.State == <i>RemoteSessionState</i>.NegotiationSending) || (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.NegotiationSendingOnConnect))</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#295"><b>295</b>if ((arg.SessionStateInfo.State == <i>RemoteSessionState</i>.NegotiationSending) || (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.NegotiationSendingOnConnect))</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#301"><b>301</b>if (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.Established)</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#313"><b>313</b>if (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.ClosingConnection)</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#319"><b>319</b>if (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.Disconnecting)</a>
<a href="../engine/remoting/client/remotingprotocolimplementation.cs.html#325"><b>325</b>if (arg.SessionStateInfo.State == <i>RemoteSessionState</i>.Reconnecting)</a>
</div>
<div class="rF"><div class="rN">engine\remoting\common\misc.cs (3)</div>
<a href="../engine/remoting/common/misc.cs.html#270"><b>270</b>internal RemoteSessionStateInfo(<i>RemoteSessionState</i> state)</a>
<a href="../engine/remoting/common/misc.cs.html#275"><b>275</b>internal RemoteSessionStateInfo(<i>RemoteSessionState</i> state, Exception reason)</a>
<a href="../engine/remoting/common/misc.cs.html#294"><b>294</b>internal <i>RemoteSessionState</i> State { get; }</a>
</div>
<div class="rF"><div class="rN">engine\remoting\server\serverremotesession.cs (8)</div>
<a href="../engine/remoting/server/serverremotesession.cs.html#398"><b>398</b>if (SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.Established ||</a>
<a href="../engine/remoting/server/serverremotesession.cs.html#399"><b>399</b>SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.EstablishedAndKeyRequested || // this is only for legacy clients</a>
<a href="../engine/remoting/server/serverremotesession.cs.html#400"><b>400</b>SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.EstablishedAndKeyExchanged)</a>
<a href="../engine/remoting/server/serverremotesession.cs.html#426"><b>426</b>if (SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.Established)</a>
<a href="../engine/remoting/server/serverremotesession.cs.html#450"><b>450</b>Dbg.Assert(SessionDataStructureHandler.StateMachine.State == <i>RemoteSessionState</i>.EstablishedAndKeyReceived,</a>
<a href="../engine/remoting/server/serverremotesession.cs.html#553"><b>553</b><i>RemoteSessionState</i> currentState = SessionDataStructureHandler.StateMachine.State;</a>
<a href="../engine/remoting/server/serverremotesession.cs.html#554"><b>554</b>if (currentState != <i>RemoteSessionState</i>.Established &amp;&amp;</a>
<a href="../engine/remoting/server/serverremotesession.cs.html#555"><b>555</b>currentState != <i>RemoteSessionState</i>.EstablishedAndKeyExchanged)</a>
</div>
<div class="rF"><div class="rN">engine\remoting\server\serverremotesessionstatemachine.cs (82)</div>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#52"><b>52</b>private <i>RemoteSessionState</i> _state;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#82"><b>82</b>_stateMachineHandle = new EventHandler&lt;RemoteSessionStateMachineEventArgs&gt;[(int)<i>RemoteSessionState</i>.MaxState, (int)RemoteSessionEvent.MaxEvent];</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#100"><b>100</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Idle, (int)RemoteSessionEvent.CreateSession] += DoCreateSession;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#102"><b>102</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationPending, (int)RemoteSessionEvent.NegotiationReceived] += DoNegotiationReceived;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#104"><b>104</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationReceived, (int)RemoteSessionEvent.NegotiationSending] += DoNegotiationSending;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#106"><b>106</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationSending, (int)RemoteSessionEvent.NegotiationSendCompleted] += DoNegotiationCompleted;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#108"><b>108</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationSent, (int)RemoteSessionEvent.NegotiationCompleted] += DoEstablished;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#110"><b>110</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationSent, (int)RemoteSessionEvent.NegotiationPending] += DoNegotiationPending;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#112"><b>112</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.MessageReceived] += DoMessageReceived;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#114"><b>114</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.NegotiationReceived, (int)RemoteSessionEvent.NegotiationFailed] += DoNegotiationFailed;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#116"><b>116</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Connecting, (int)RemoteSessionEvent.ConnectFailed] += DoConnectFailed;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#118"><b>118</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.KeyReceived] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#119"><b>119</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.KeyRequested] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#120"><b>120</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.Established, (int)RemoteSessionEvent.KeyReceiveFailed] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#121"><b>121</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyRequested, (int)RemoteSessionEvent.KeyReceived] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#122"><b>122</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyRequested, (int)RemoteSessionEvent.KeySent] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#123"><b>123</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyRequested, (int)RemoteSessionEvent.KeyReceiveFailed] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#124"><b>124</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyReceived, (int)RemoteSessionEvent.KeySendFailed] += DoKeyExchange;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#125"><b>125</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyReceived, (int)RemoteSessionEvent.KeySent] += DoKeyExchange;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#128"><b>128</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyExchanged, (int)RemoteSessionEvent.KeyReceived] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#129"><b>129</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyExchanged, (int)RemoteSessionEvent.KeyRequested] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#130"><b>130</b>_stateMachineHandle[(int)<i>RemoteSessionState</i>.EstablishedAndKeyExchanged, (int)RemoteSessionEvent.KeyReceiveFailed] += DoKeyExchange; //</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#144"><b>144</b>SetState(<i>RemoteSessionState</i>.Idle, null);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#153"><b>153</b>internal <i>RemoteSessionState</i> State</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#172"><b>172</b>if (_state == <i>RemoteSessionState</i>.Established ||</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#173"><b>173</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeySent || // server session will never be in this state.. TODO- remove this</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#174"><b>174</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeyReceived ||</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#175"><b>175</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeyExchanged)</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#300"><b>300</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Idle, &quot;DoCreateSession cannot only be called in Idle state&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#328"><b>328</b>Dbg.Assert((_state == <i>RemoteSessionState</i>.Idle) || (_state == <i>RemoteSessionState</i>.NegotiationSent),</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#331"><b>331</b>SetState(<i>RemoteSessionState</i>.NegotiationPending, null);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#361"><b>361</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.NegotiationPending, &quot;state must be in NegotiationPending state&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#373"><b>373</b>SetState(<i>RemoteSessionState</i>.NegotiationReceived, null);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#397"><b>397</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.NegotiationReceived, &quot;State must be NegotiationReceived&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#399"><b>399</b>SetState(<i>RemoteSessionState</i>.NegotiationSending, null);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#424"><b>424</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.NegotiationSending, &quot;State must be NegotiationSending&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#427"><b>427</b>SetState(<i>RemoteSessionState</i>.NegotiationSent, null);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#451"><b>451</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.NegotiationSent, &quot;State must be NegotiationReceived&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#459"><b>459</b>if (_state != <i>RemoteSessionState</i>.NegotiationSent)</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#464"><b>464</b>SetState(<i>RemoteSessionState</i>.Established, null);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#496"><b>496</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Established ||</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#497"><b>497</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeyExchanged ||</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#498"><b>498</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeyReceived ||</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#499"><b>499</b>_state == <i>RemoteSessionState</i>.EstablishedAndKeySent,  // server session will never be in this state.. TODO- remove this</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#603"><b>603</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.Connecting, &quot;session State must be Connecting&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#652"><b>652</b>Dbg.Assert(_state != <i>RemoteSessionState</i>.Idle, &quot;session should not be in idle state when SessionConnect event is queued&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#653"><b>653</b>if ((_state != <i>RemoteSessionState</i>.Closed) &amp;&amp; (_state != <i>RemoteSessionState</i>.ClosingConnection))</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#678"><b>678</b><i>RemoteSessionState</i> oldState = _state;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#682"><b>682</b>case <i>RemoteSessionState</i>.ClosingConnection:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#683"><b>683</b>case <i>RemoteSessionState</i>.Closed:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#687"><b>687</b>case <i>RemoteSessionState</i>.Connecting:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#688"><b>688</b>case <i>RemoteSessionState</i>.Connected:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#689"><b>689</b>case <i>RemoteSessionState</i>.Established:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#690"><b>690</b>case <i>RemoteSessionState</i>.EstablishedAndKeySent:  // server session will never be in this state.. TODO- remove this</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#691"><b>691</b>case <i>RemoteSessionState</i>.EstablishedAndKeyReceived:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#692"><b>692</b>case <i>RemoteSessionState</i>.EstablishedAndKeyExchanged:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#693"><b>693</b>case <i>RemoteSessionState</i>.NegotiationReceived:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#694"><b>694</b>case <i>RemoteSessionState</i>.NegotiationSent:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#695"><b>695</b>case <i>RemoteSessionState</i>.NegotiationSending:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#696"><b>696</b>SetState(<i>RemoteSessionState</i>.ClosingConnection, fsmEventArg.Reason);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#700"><b>700</b>case <i>RemoteSessionState</i>.Idle:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#701"><b>701</b>case <i>RemoteSessionState</i>.UndefinedState:</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#704"><b>704</b>SetState(<i>RemoteSessionState</i>.Closed, forcedCloseException);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#734"><b>734</b><i>RemoteSessionState</i> stateBeforeTransition = _state;</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#736"><b>736</b>SetState(<i>RemoteSessionState</i>.Closed, fsmEventArg.Reason);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#764"><b>764</b>SetState(<i>RemoteSessionState</i>.Closed, fsmEventArg.Reason);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#823"><b>823</b>if (_state == <i>RemoteSessionState</i>.Established)</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#904"><b>904</b>Dbg.Assert(_state &gt;= <i>RemoteSessionState</i>.Established,</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#912"><b>912</b>if (_state == <i>RemoteSessionState</i>.EstablishedAndKeyRequested)</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#924"><b>924</b>SetState(<i>RemoteSessionState</i>.EstablishedAndKeyReceived, eventArgs.Reason);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#934"><b>934</b>if (_state == <i>RemoteSessionState</i>.EstablishedAndKeyReceived)</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#937"><b>937</b>SetState(<i>RemoteSessionState</i>.EstablishedAndKeyExchanged, eventArgs.Reason);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#945"><b>945</b>if ((_state == <i>RemoteSessionState</i>.Established) || (_state == <i>RemoteSessionState</i>.EstablishedAndKeyExchanged))</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#948"><b>948</b>SetState(<i>RemoteSessionState</i>.EstablishedAndKeyRequested, eventArgs.Reason);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#959"><b>959</b>if ((_state == <i>RemoteSessionState</i>.Established) || (_state == <i>RemoteSessionState</i>.EstablishedAndKeyExchanged))</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#984"><b>984</b>Dbg.Assert(_state == <i>RemoteSessionState</i>.EstablishedAndKeyRequested, &quot;timeout should only happen when waiting for a key&quot;);</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#1018"><b>1018</b>private void SetState(<i>RemoteSessionState</i> newState, Exception reason)</a>
<a href="../engine/remoting/server/serverremotesessionstatemachine.cs.html#1020"><b>1020</b><i>RemoteSessionState</i> oldState = _state;</a>
</div>
</div>
</body></html>